{
  "identifier": "createAdditionalService",
  "title": "createAdditionalService",
  "async": false,
  "elements": [
    {
      "name": "createAdditionalService",
      "type": "event/webhook",
      "options": {
        "module": null,
        "title": "createAdditionalService",
        "async": false,
        "roles": null,
        "public": false
      },
      "in": {},
      "set": {
        "resource": "default:"
      },
      "to": {
        "default": {
          "setLocale": [
            "default"
          ],
          "prefillFields": [
            "default"
          ]
        }
      },
      "meta": {
        "position": [
          24.88671875,
          98.265625
        ]
      }
    },
    {
      "name": "setLocale",
      "type": "op/recipe",
      "options": {
        "recipe": "locale()"
      },
      "in": {},
      "set": {
        "locale": "default:"
      },
      "to": {},
      "meta": {
        "position": [
          571.21875,
          6.25
        ]
      }
    },
    {
      "name": "createAdditionalServiceModal",
      "type": "action/modal",
      "options": {
        "hard": false,
        "type": "confirm",
        "title": {
          ".recipe": "t('workflows.createAdditionalService.createAdditionalServiceModal.modal.title')"
        },
        "fields": [],
        "layout": "create_additional_service.modal",
        "checkpoint": true,
        "autosave_key": null
      },
      "in": {},
      "set": {
        "modalData": "confirm:"
      },
      "to": {
        "confirm": {
          "createNewAdditionalService": [
            "default"
          ]
        }
      },
      "meta": {
        "position": [
          582.3984375,
          202.33984375
        ]
      }
    },
    {
      "name": "createNewAdditionalService",
      "type": "source/new",
      "options": {
        "module": "additional_services",
        "values": null,
        "client": null
      },
      "in": {},
      "set": {
        "addServiceNew": "default:"
      },
      "to": {
        "default": {
          "smart-cheetah-30": [
            "default"
          ]
        }
      },
      "meta": {
        "position": [
          850.04296875,
          209.8671875
        ]
      }
    },
    {
      "name": "smart-cheetah-30",
      "type": "op/set",
      "options": {
        "copy": "$modalData",
        "values": [],
        "process": false,
        "recipes": {
          "services": "$modalData.services.map(position => {\"service\": position.service,\"description\": position.description,\"single_price\": position.single_price,\"quantity\": position.quantity, \"total_price\": position.total_price, \"quantity_type\": position.quantity_type})"
        }
      },
      "in": {},
      "set": {},
      "to": {
        "default": {
          "bad-newt-25": [
            "default"
          ]
        }
      },
      "meta": {
        "position": [
          1139.05859375,
          214.765625
        ]
      }
    },
    {
      "name": "bad-newt-25",
      "type": "action/save",
      "options": {
        "triggerEvents": false,
        "skip_recipes": false,
        "continueIfInvalid": false
      },
      "in": {},
      "set": {
        "savedEntity": "default:"
      },
      "to": {
        "default": {
          "redirectToAdditionalServices": [
            "default"
          ]
        }
      },
      "meta": {
        "position": [
          1402.828125,
          213.46484375
        ]
      }
    },
    {
      "name": "redirectToAdditionalServices",
      "type": "action/redirect",
      "options": {
        "url": "",
        "fill": false,
        "http": null,
        "swap": false,
        "action": "module.show",
        "module": "additional_services",
        "target": null,
        "queryParams": []
      },
      "in": {
        "resource": "$savedEntity"
      },
      "set": {},
      "to": {},
      "meta": {
        "position": [
          1666.7114546263344,
          188.34443394128112
        ]
      }
    },
    {
      "name": "prefillFields",
      "type": "op/recipe",
      "options": {
        "recipe": "{...$resource, \"project\": $resource, \"added_by\": user(), \"process\": $resource.process, \"timestamp\": now()}"
      },
      "in": {},
      "set": {},
      "to": {
        "default": {
          "createAdditionalServiceModal": [
            "default"
          ]
        }
      },
      "meta": {
        "position": [
          333.1015625,
          240.81640625
        ]
      }
    }
  ],
  "events": [
    {
      "identifier": "createAdditionalService",
      "type": "webhook",
      "module": null,
      "title": "createAdditionalService",
      "async": false,
      "roles": null,
      "public": false
    }
  ],
  "comments": []
}
