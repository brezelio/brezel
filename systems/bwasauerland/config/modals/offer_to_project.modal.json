{
    "tabs": [
        {
            "identifier": "offer_to_project",
            "rows": [
                {
                    "cols": [
                        {
                            "options": {
                                "borderless": true
                            },
                            "span": 12,
                            "components": [
                                {
                                    "type": "field_group",
                                    "options": {
                                        "vertical_labels": false,
                                        "no_padding": true,
                                        "fields": [
                                            {
                                                "identifier": "process",
                                                "type": "select",
                                                "options": {
                                                  "rules": "required",
                                                  "references": "processes"
                                                }
                                            },
                                            {
                                                "identifier": "customer",
                                                "type": "select",
                                                "options": {
                                                  "references": "customers",
                                                  "rules": "required"
                                                }
                                            },
                                            {
                                                "identifier": "object",
                                                "type": "select",
                                                "options": {
                                                  "references": "objects",
                                                  "rules": "required"
                                                }
                                            },
                                            {
                                                "identifier": "start_date",
                                                "type": "date",
                                                "options": {
                                                  "fullDay": true,
                                                  "recipes": {
                                                    "default": "date()"
                                                  }
                                                }
                                              },
                                              {
                                                "identifier": "end_date",
                                                "type": "date",
                                                "options": {
                                                  "fullDay": true
                                                }
                                              },
                                              {
                                                "identifier": "total_worktime",
                                                "type": "number"
                                              },
                                              {
                                                "identifier": "status",
                                                "type": "choice",
                                                "options": {
                                                  "values": ["planned", "in_progress", "finished"]
                                                }
                                              },
                                              {
                                                "identifier": "problem",
                                                "type": "select",
                                                "options": {
                                                  "references": "problems",
                                                  "rules": "required"
                                                }
                                              }
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "options": {
                                "borderless": true
                            },
                            "span": 12,
                            "components": [
                                {
                                    "type": "field_group",
                                    "options": {
                                        "vertical_labels": false,
                                        "no_padding": true,
                                        "fields": [
                                            {
                                                "identifier": "room_temperature",
                                                "type": "number"
                                            },
                                              {
                                                "identifier": "room_humidity",
                                                "type": "number"
                                              },
                                              {
                                                "identifier": "surface_temperature",
                                                "type": "number"
                                              },
                                              {
                                                "identifier": "construction_year",
                                                "type": "text"
                                              },
                                              {
                                                "identifier": "wall_material",
                                                "type": "text"
                                              },
                                              {
                                                "identifier": "wall_thickness",
                                                "type": "number"
                                              },
                                              {
                                                "identifier": "building_type",
                                                "type": "select",
                                                "options": {
                                                  "references": "building_types"
                                                }
                                              },
                                              {
                                                "identifier": "level",
                                                "type": "text"
                                              },
                                              {
                                                "identifier": "floor_material",
                                                "type": "text"
                                              },
                                              {
                                                "identifier": "strip_foundation",
                                                "type": "text"
                                              },
                                              {
                                                "identifier": "seals_done_in_the_past",
                                                "type": "checkbox"
                                              }
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "options": {
                                "borderless": true
                            },
                            "span": 24,
                            "components": [
                              {
                                "type": "headline",
                                "options": {
                                  "identifier": "positions"
                                }
                              },
                                {
                                    "type": "field_group",
                                    "options": {
                                        "vertical_labels": false,
                                        "no_labels": true,
                                        "no_padding": true,
                                        "fields": [
                                            {
                                                "identifier": "positions",
                                                "options": {
                                                  "show_ordering": true,
                                                  "fields": [
                                                    {
                                                      "identifier": "service",
                                                      "type": "select",
                                                      "options": {
                                                        "references": "services",
                                                        "add_options": true,
                                                        "events": {
                                                          "on_change": ["OnChangeService"]
                                                        }
                                                      }
                                                    },
                                                    {
                                                      "identifier": "description",
                                                      "type": "text"
                                                    },
                                                    {
                                                      "identifier": "single_price",
                                                      "type": "currency",
                                                      "options": {
                                                        "readonly": true
                                                      }
                                                    },
                                                    {
                                                      "identifier": "quantity",
                                                      "type": "number",
                                                      "options": {
                                                        "decimal_digits": 2,
                                                        "min": 1
                                                      }
                                                    },
                                                    {
                                                      "identifier": "total_price",
                                                      "type": "currency",
                                                      "recipe": "single_price * quantity"
                                                    }
                                                  ]
                                                },
                                                "type": "list"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "options": {
                                "borderless": true
                            },
                            "span": 12,
                            "components": [
                                {
                                    "type": "field_group",
                                    "options": {
                                        "vertical_labels": false,
                                        "no_padding": true,
                                        "fields": [

                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "options": {
                                "borderless": true
                            },
                            "span": 12,
                            "components": [
                                {
                                    "type": "field_group",
                                    "options": {
                                        "vertical_labels": false,
                                        "no_padding": true,
                                        "fields": [
                                            {
                                                "identifier": "taxrate",
                                                "type": "number",
                                                "options": {
                                                  "readonly": true,
                                                  "default": 19
                                                }
                                            },
                                            {
                                                "identifier": "price_net",
                                                "type": "currency",
                                                "recipe": "sum(positions[*].total_price)"
                                            },
                                            {
                                                "identifier": "price_total",
                                                "type": "currency",
                                                "recipe": "price_net+(price_net* (taxrate / 100))"
                                            }
                                        ]
                                    }
                                }
                            ]
                        }

                    ]
                }
            ]
        }
    ]
}
